(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69fbdd7e"],{"62b3":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cart"},[e("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._m(0),e("div",{staticClass:"container"},[e("div",{staticClass:"row mb-5"},[e("div",{staticClass:"col-lg-7"},[e("div",{staticClass:"list"},[e("table",{staticClass:"table mt-3"},[t._m(1),e("tbody",t._l(t.cart,(function(a){return e("tr",{key:a.product.id+1},[e("td",[t._v(t._s(a.product.title))]),e("td",{staticClass:"text-center d-none d-sm-table-cell"},[t._v(t._s(a.quantity))]),e("td",{staticClass:"text-right",domProps:{innerHTML:t._s("NT$ "+a.product.price)}}),e("td",{staticClass:"text-center"},[e("a",{attrs:{title:"刪除「"+a.product.title+"」"},on:{click:function(e){return e.preventDefault(),t.deleteCartItem(a.product.id)}}},[e("i",{staticClass:"fas fa-times"})])])])})),0)])])]),e("div",{staticClass:"col-lg-5"},[e("div",{staticClass:"amout"},[e("h4",{staticClass:"text-center mb-3"},[t._v("訂單詳細內容")]),e("table",{staticClass:"table mt-3"},[e("tbody",t._l(t.cart,(function(a){return e("tr",{key:a.product.id+2},[e("td",[t._v(t._s(a.product.title))]),e("td",{domProps:{innerHTML:t._s(a.quantity+" / "+a.product.unit)}}),e("td",{staticClass:"text-right",domProps:{innerHTML:t._s("NT$ "+a.product.price*a.quantity)}})])})),0)]),e("div",{staticClass:"total text-right",domProps:{innerHTML:t._s("總計：NT$ "+t.countTotalPrice)}})])])]),e("div",{staticClass:"row mb-5"},[e("div",{staticClass:"col-lg-12 buyer-data"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.cart.length,expression:"!cart.length"}],staticClass:"mask"}),e("h3",{staticClass:"h4"},[t._v("訂購人資訊")]),e("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.invalid;return[e("form",{on:{submit:function(a){return a.preventDefault(),t.createOrder(a)}}},[e("div",{staticClass:"form-row"},[e("validation-provider",{staticClass:"form-group col-md-6",attrs:{rules:"required",name:"收件人姓名",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"buyername"}},[t._v("收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.buyerData.name,expression:"buyerData.name"}],staticClass:"form-control",class:r,attrs:{id:"buyername",type:"text",name:"name"},domProps:{value:t.buyerData.name},on:{input:function(a){a.target.composing||t.$set(t.buyerData,"name",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("validation-provider",{staticClass:"form-group col-md-6",attrs:{name:"電話",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"phone"}},[t._v("電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.buyerData.tel,expression:"buyerData.tel"}],staticClass:"form-control",class:r,attrs:{id:"phone",type:"tel",name:"tel"},domProps:{value:t.buyerData.tel},on:{input:function(a){a.target.composing||t.$set(t.buyerData,"tel",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("validation-provider",{staticClass:"form-group",attrs:{name:"email",rules:"required|email",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.buyerData.email,expression:"buyerData.email"}],staticClass:"form-control",class:r,attrs:{id:"email",type:"email",name:"email"},domProps:{value:t.buyerData.email},on:{input:function(a){a.target.composing||t.$set(t.buyerData,"email",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("validation-provider",{staticClass:"form-group",attrs:{name:"地址",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"address"}},[t._v("地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.buyerData.address,expression:"buyerData.address"}],staticClass:"form-control",class:r,attrs:{id:"address",type:"address",name:"address"},domProps:{value:t.buyerData.address},on:{input:function(a){a.target.composing||t.$set(t.buyerData,"address",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("ValidationProvider",{staticClass:"form-group",attrs:{name:"付款方式",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"payment"}},[t._v("付款方式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.buyerData.payment,expression:"buyerData.payment"}],staticClass:"form-control",class:r,attrs:{id:"payment",name:"payment",required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.buyerData,"payment",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",disabled:""}},[t._v("請選擇付款方式")]),e("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),e("option",{attrs:{value:"ATM"}},[t._v("ATM")]),e("option",{attrs:{value:"Barcode"}},[t._v("Barcode")]),e("option",{attrs:{value:"Credit"}},[t._v("信用卡")]),e("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),e("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])]),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"message"}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.buyerData.message,expression:"buyerData.message"}],staticClass:"form-control",attrs:{id:"message",name:"message"},domProps:{value:t.buyerData.message},on:{input:function(a){a.target.composing||t.$set(t.buyerData,"message",a.target.value)}}})]),e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"submit",disabled:s}},[t._v("送出訂單")])])],1)]}}])})],1)])])],1)},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h2",{staticClass:"title title-page"},[e("span",[t._v("購物清單")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("產品")]),e("th",{staticClass:"text-center d-none d-sm-table-cell"},[t._v("數量")]),e("th",{staticClass:"text-right"},[t._v("單價")]),e("th",{staticClass:"text-center"},[t._v("刪除")])])])}],i=(e("99af"),e("4160"),e("159b"),{props:["cart"],data:function(){return{buyerData:{name:"",email:"",tel:"",address:"",payment:"",message:""},isLoading:!1}},methods:{getCart:function(){var t=this;this.isLoading=!0,this.totalPrice=0;var a="".concat("https://course-ec-api.hexschool.io/api","/").concat("8213c3e3-1f7b-4c06-b649-6fa6b24c50ba","/ec/shopping");this.$http.get(a).then((function(a){t.cart=a.data.data,t.cart.forEach((function(a){t.totalPrice+=a.product.price*a.quantity})),t.isLoading=!1})).catch((function(){t.isLoading=!1}))},deleteCartItem:function(t){var a=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/api","/").concat("8213c3e3-1f7b-4c06-b649-6fa6b24c50ba","/ec/shopping/").concat(t);this.$http.delete(e).then((function(){a.$bus.$emit("get-cart"),a.isLoading=!1})).catch((function(){a.isLoading=!1}))},createOrder:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api","/").concat("8213c3e3-1f7b-4c06-b649-6fa6b24c50ba","/ec/orders");this.$http.post(a,this.buyerData).then((function(){t.$router.push("/home"),t.isLoading=!1})).catch((function(){t.isLoading=!1}))}},computed:{countTotalPrice:function(){var t=0;return this.cart.forEach((function(a){t+=a.product.price*a.quantity})),t}},created:function(){},mounted:function(){this.$bus.$emit("index-header-ctrl",!1)}}),n=i,o=e("2877"),c=Object(o["a"])(n,s,r,!1,null,null,null);a["default"]=c.exports},"99af":function(t,a,e){"use strict";var s=e("23e7"),r=e("d039"),i=e("e8b5"),n=e("861d"),o=e("7b0b"),c=e("50c4"),l=e("8418"),u=e("65f0"),d=e("1dde"),p=e("b622"),m=e("2d00"),v=p("isConcatSpreadable"),f=9007199254740991,b="Maximum allowed index exceeded",g=m>=51||!r((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),h=d("concat"),y=function(t){if(!n(t))return!1;var a=t[v];return void 0!==a?!!a:i(t)},_=!g||!h;s({target:"Array",proto:!0,forced:_},{concat:function(t){var a,e,s,r,i,n=o(this),d=u(n,0),p=0;for(a=-1,s=arguments.length;a<s;a++)if(i=-1===a?n:arguments[a],y(i)){if(r=c(i.length),p+r>f)throw TypeError(b);for(e=0;e<r;e++,p++)e in i&&l(d,p,i[e])}else{if(p>=f)throw TypeError(b);l(d,p++,i)}return d.length=p,d}})}}]);
//# sourceMappingURL=chunk-69fbdd7e.bee2dc46.js.map
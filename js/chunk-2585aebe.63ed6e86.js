(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2585aebe"],{5899:function(t,a){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,a,e){var s=e("1d80"),r=e("5899"),i="["+r+"]",n=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),c=function(t){return function(a){var e=String(s(a));return 1&t&&(e=e.replace(n,"")),2&t&&(e=e.replace(o,"")),e}};t.exports={start:c(1),end:c(2),trim:c(3)}},"62b3":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cart"},[e("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._m(0),t.cart.length<1?e("div",{staticClass:"container"},[e("div",{staticClass:"row mb-5"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"empty"},[e("p",[t._v("您的購物車現在沒有商品喔，快去購物吧!!")]),e("router-link",{staticClass:"btn btn-primary btn-lg rounded-0 mt-2",attrs:{to:"/products"}},[t._v("逛逛商品")]),t._m(1)],1)])])]):e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"step"},[t._m(2),e("div",{class:t.checkCartPdt?"active":""},[e("span",[t._v("2")]),e("p",[t._v("填寫購物資訊")])]),t._m(3)])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.checkCartPdt,expression:"!checkCartPdt"}],staticClass:"row mb-5"},[e("div",{staticClass:"col-lg-7"},[e("div",{staticClass:"list"},[e("table",{staticClass:"table mt-3"},[t._m(4),e("tbody",t._l(t.cart,(function(a){return e("tr",{key:a.product.id+1},[e("td",[t._v(t._s(a.product.title))]),e("td",{staticClass:"text-center d-none d-sm-table-cell"},[e("div",{staticClass:"quantity"},[e("button",{class:1===a.quantity?"disabled":"",attrs:{type:"button",title:"減少數量"},on:{click:function(e){return e.preventDefault(),t.updateQuantity(a.product.id,a.quantity-1)}}},[e("i",{staticClass:"fas fa-minus-circle"})]),e("input",{attrs:{type:"number"},domProps:{value:a.quantity},on:{change:function(e){return t.changeQuantity(a.product.id,e.target.value)}}}),e("button",{class:10===a.quantity?"disabled":"",attrs:{type:"button",title:"增加數量"},on:{click:function(e){return e.preventDefault(),t.updateQuantity(a.product.id,a.quantity+1)}}},[e("i",{staticClass:"fas fa-plus-circle"})])])]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("money")(a.product.price)))]),e("td",{staticClass:"text-center"},[e("a",{staticClass:"delete",attrs:{title:"刪除「"+a.product.title+"」"},on:{click:function(e){return e.preventDefault(),t.deleteCartItem(a.product.id)}}},[e("i",{staticClass:"fas fa-times"})])])])})),0)])])]),e("div",{staticClass:"col-lg-5"},[e("div",{staticClass:"amout"},[e("h4",{staticClass:"text-center mb-3"},[t._v("訂單詳細內容")]),e("table",{staticClass:"table mt-3 mb-2"},[e("tbody",t._l(t.cart,(function(a){return e("tr",{key:a.product.id+2},[e("td",[t._v(t._s(a.product.title))]),e("td",{domProps:{innerHTML:t._s(a.quantity+" / "+a.product.unit)}}),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("money")(a.product.price*a.quantity)))])])})),0)]),e("div",{staticClass:"total"},[e("div",[e("span",[t._v("小計")]),t._v(" "),e("p",[t._v(t._s(t._f("money")(t.countTotalPrice)))])]),e("div",[e("span",[t._v("運費")]),t._v(" "),e("p",[t._v(t._s(t._f("money")(t.shippingFee)))])]),e("div",{staticClass:"text-success"},[e("span",[t._v("應付")]),t._v(" "),e("p",[t._v(t._s(t._f("money")(t.totalPaid)))])])])])]),e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"btn-box"},[e("router-link",{staticClass:"btn btn-secondary rounded-0",attrs:{to:"/products"}},[t._v("繼續購物")]),e("button",{staticClass:"btn btn-primary rounded-0 ml-3",attrs:{type:"button"},on:{click:function(a){t.checkCartPdt=!0}}},[t._v("下一步")])],1)])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.checkCartPdt,expression:"checkCartPdt"}],staticClass:"row mb-5"},[e("div",{staticClass:"col-lg-2"}),e("div",{staticClass:"col-lg-8 buyer-data"},[e("h3",{staticClass:"h4"},[t._v("購物資訊")]),e("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.invalid;return[e("form",{on:{submit:function(a){return a.preventDefault(),t.createOrder(a)}}},[e("div",{staticClass:"form-row"},[e("validation-provider",{staticClass:"form-group col-md-6",attrs:{rules:"required",name:"收件人姓名",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"buyername"}},[t._v("收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.buyerData.name,expression:"buyerData.name"}],staticClass:"form-control",class:r,attrs:{id:"buyername",type:"text",name:"name"},domProps:{value:t.buyerData.name},on:{input:function(a){a.target.composing||t.$set(t.buyerData,"name",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("validation-provider",{staticClass:"form-group col-md-6",attrs:{name:"電話",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"phone"}},[t._v("電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.buyerData.tel,expression:"buyerData.tel"}],staticClass:"form-control",class:r,attrs:{id:"phone",type:"tel",name:"tel"},domProps:{value:t.buyerData.tel},on:{input:function(a){a.target.composing||t.$set(t.buyerData,"tel",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("validation-provider",{staticClass:"form-group",attrs:{name:"email",rules:"required|email",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.buyerData.email,expression:"buyerData.email"}],staticClass:"form-control",class:r,attrs:{id:"email",type:"email",name:"email"},domProps:{value:t.buyerData.email},on:{input:function(a){a.target.composing||t.$set(t.buyerData,"email",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("validation-provider",{staticClass:"form-group",attrs:{name:"地址",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"address"}},[t._v("地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.buyerData.address,expression:"buyerData.address"}],staticClass:"form-control",class:r,attrs:{id:"address",type:"address",name:"address"},domProps:{value:t.buyerData.address},on:{input:function(a){a.target.composing||t.$set(t.buyerData,"address",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("ValidationProvider",{staticClass:"form-group",attrs:{name:"付款方式",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"payment"}},[t._v("付款方式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.buyerData.payment,expression:"buyerData.payment"}],staticClass:"form-control",class:r,attrs:{id:"payment",name:"payment",required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.buyerData,"payment",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",disabled:""}},[t._v("請選擇付款方式")]),e("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),e("option",{attrs:{value:"ATM"}},[t._v("ATM")]),e("option",{attrs:{value:"Barcode"}},[t._v("Barcode")]),e("option",{attrs:{value:"Credit"}},[t._v("信用卡")]),e("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),e("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])]),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"message"}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.buyerData.message,expression:"buyerData.message"}],staticClass:"form-control",attrs:{id:"message",name:"message"},domProps:{value:t.buyerData.message},on:{input:function(a){a.target.composing||t.$set(t.buyerData,"message",a.target.value)}}})]),e("div",{staticClass:"btn-box"},[e("button",{staticClass:"btn btn-secondary rounded-0",attrs:{type:"button"},on:{click:function(a){t.checkCartPdt=!1}}},[t._v("上一步")]),e("button",{staticClass:"btn btn-primary rounded-0 ml-3",attrs:{type:"submit",disabled:s}},[t._v("確認付款")])])],1)]}}])})],1),e("div",{staticClass:"col-lg-2"})])])],1)},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h2",{staticClass:"title title-page"},[e("span",[t._v("購物清單")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cart"},[e("i",{staticClass:"fas fa-shopping-cart"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"active"},[e("span",[t._v("1")]),e("p",[t._v("確認數量")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("span",[t._v("3")]),e("p",[t._v("完成")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("商品")]),e("th",{staticClass:"text-center d-none d-sm-table-cell"},[t._v("數量")]),e("th",{staticClass:"text-right"},[t._v("單價")]),e("th",{staticClass:"text-center"},[t._v("刪除")])])])}],i=(e("99af"),e("4160"),e("a9e3"),e("159b"),{props:["cart"],data:function(){return{buyerData:{name:"",email:"",tel:"",address:"",payment:"",message:""},checkCartPdt:!1,isLoading:!1}},methods:{deleteCartItem:function(t){var a=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/api","/").concat("8213c3e3-1f7b-4c06-b649-6fa6b24c50ba","/ec/shopping/").concat(t);this.$http.delete(e).then((function(){a.$emit("get-cart"),a.isLoading=!1})).catch((function(){a.isLoading=!1}))},updateQuantity:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!(e>10||e<1)){this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io/api","/").concat("8213c3e3-1f7b-4c06-b649-6fa6b24c50ba","/ec/shopping"),r={product:t,quantity:e};this.$http.patch(s,r).then((function(){a.$emit("get-cart"),a.isLoading=!1})).catch((function(t){a.isLoading=!1,Swal.fire({title:t.response.data.errors,icon:"warning"})}))}},changeQuantity:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=Number(a);e>0&&e<11&&this.updateQuantity(t,Math.floor(a))},createOrder:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api","/").concat("8213c3e3-1f7b-4c06-b649-6fa6b24c50ba","/ec/orders");this.$http.post(a,this.buyerData).then((function(a){t.$router.push("/order/".concat(a.data.data.id)),t.isLoading=!1})).catch((function(){t.isLoading=!1}))}},computed:{countTotalPrice:function(){var t=0;return this.cart.forEach((function(a){t+=a.product.price*a.quantity})),t},shippingFee:function(){var t=this.countTotalPrice>=1200?0:100;return t},totalPaid:function(){return this.countTotalPrice+this.shippingFee}}}),n=i,o=e("2877"),c=Object(o["a"])(n,s,r,!1,null,null,null);a["default"]=c.exports},7156:function(t,a,e){var s=e("861d"),r=e("d2bb");t.exports=function(t,a,e){var i,n;return r&&"function"==typeof(i=a.constructor)&&i!==e&&s(n=i.prototype)&&n!==e.prototype&&r(t,n),t}},"99af":function(t,a,e){"use strict";var s=e("23e7"),r=e("d039"),i=e("e8b5"),n=e("861d"),o=e("7b0b"),c=e("50c4"),l=e("8418"),u=e("65f0"),d=e("1dde"),p=e("b622"),v=e("2d00"),f=p("isConcatSpreadable"),m=9007199254740991,b="Maximum allowed index exceeded",_=v>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),h=d("concat"),g=function(t){if(!n(t))return!1;var a=t[f];return void 0!==a?!!a:i(t)},y=!_||!h;s({target:"Array",proto:!0,forced:y},{concat:function(t){var a,e,s,r,i,n=o(this),d=u(n,0),p=0;for(a=-1,s=arguments.length;a<s;a++)if(i=-1===a?n:arguments[a],g(i)){if(r=c(i.length),p+r>m)throw TypeError(b);for(e=0;e<r;e++,p++)e in i&&l(d,p,i[e])}else{if(p>=m)throw TypeError(b);l(d,p++,i)}return d.length=p,d}})},a9e3:function(t,a,e){"use strict";var s=e("83ab"),r=e("da84"),i=e("94ca"),n=e("6eeb"),o=e("5135"),c=e("c6b6"),l=e("7156"),u=e("c04e"),d=e("d039"),p=e("7c73"),v=e("241c").f,f=e("06cf").f,m=e("9bf2").f,b=e("58a8").trim,_="Number",h=r[_],g=h.prototype,y=c(p(g))==_,C=function(t){var a,e,s,r,i,n,o,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=b(l),a=l.charCodeAt(0),43===a||45===a){if(e=l.charCodeAt(2),88===e||120===e)return NaN}else if(48===a){switch(l.charCodeAt(1)){case 66:case 98:s=2,r=49;break;case 79:case 111:s=8,r=55;break;default:return+l}for(i=l.slice(2),n=i.length,o=0;o<n;o++)if(c=i.charCodeAt(o),c<48||c>r)return NaN;return parseInt(i,s)}return+l};if(i(_,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var x,w=function(t){var a=arguments.length<1?0:t,e=this;return e instanceof w&&(y?d((function(){g.valueOf.call(e)})):c(e)!=_)?l(new h(C(a)),e,w):C(a)},k=s?v(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),D=0;k.length>D;D++)o(h,x=k[D])&&!o(w,x)&&m(w,x,f(h,x));w.prototype=g,g.constructor=w,n(r,_,w)}}}]);
//# sourceMappingURL=chunk-2585aebe.63ed6e86.js.map